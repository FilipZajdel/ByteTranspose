<head><link rel="icon" href="static/img/logo.ico" /><meta charset="UTF-8" /><style>table, th, td{                 border:1px solid gray;                 border-collapse: collapse;                }                 .chapter {                   font-size: 180%;                   text-align: center;                   font-weight: bold;                 }                                 .description {                  padding: 1%;                   margin:auto;                   width: 70%;                   font-size:120%;                }                .tooltip {                  position: relative;                  display: block;                   font-size: 180%;                   text-align: center;                 }                .tooltip .tooltiptext {                  visibility: hidden;                  background-color: rgba(255, 255, 255, 0.9);                  color: black;                  font-weight: normal;                  font-size: 70%;                  text-align: left;                  white-space: pre;                  border-radius: 6px;                  padding: 3px;                  border: 2px solid black;                                    /* Position the tooltip */                  position: absolute;                  z-index: 1;                  top: 102%;                  left: 0%;                  margin-top: -1px;                }                .tooltip:hover .tooltiptext {                  visibility: visible;                 }</style><title>Byte Transpose Performance Tests</title></head><body style="background-color: rgba(220, 220, 220, 0.6); margin:0; padding:0"><div style="background: url(&quot;static/img/prism.png&quot;) fixed; margin: auto; width: 70%; color: rgb(25, 20, 20); padding-left: 2%; padding-right: 2%; padding-top: 2%"><header style="background-color: rgba(220, 220, 220, 0.6);"><br /><p style="text-align: center; font-size: 250%; font-weight: bold;">Performance tests of C functions</p><p style="text-align: center; font-size: 120%;">Project implemented in cooperation with Mirosław Żołądź phD at the AGH University of Science and Technology</p><br /><div style="margin: auto"><table style="margin: auto; border: 0px"><col width="250" /><col width="250" /><tr style="border: 0px"><th style="border: 0px">Sources: <a href="https://github.com/FilipZajdel/ByteTranspose" style="text-decoration:none">Github</a></th><th style="border: 0px">Author: Filip Zajdel</th><th style="border: 0px">Contact: filipzajdel@student.agh.edu.pl</th></tr></table></div></header><br /><br /><div class="chapter">-- About Tests --</div><div class="description">The goal was to measure execution time of some pieces of C code across different devices,                    operating systems and compilers.</div><br /><div class="chapter">-- Device Configuration --</div><div class="description">Tests were executed on Raspberry Pi 4 (RPi) with Linux installed and one PC with both                Linux and Windows installed.</div><br /><div class="chapter">-- Results --</div><br /><br /><div style="margin: auto; clear: both; font-size:100%; margin: left; width: 70%; border-top: solid 1px gray; /*border-left: solid 1px gray*/"><span class="tooltip">decode_chip_byte_stream_to_pixel_array()<span class="tooltiptext">def decode_chip_byte_stream_to_pixel_array(byte_stream):
    len_byte_stream = len(byte_stream)
    Deinterleve_16Bytes_to_2x8Bytes(byte_stream,len_byte_stream//16)
    TransposeBits_16xI8_to_8xI16(byte_stream,len_byte_stream//16)
    byte_stream = cast(byte_stream, POINTER(WORD))
    Deinterleve_14x8Words_to_8x14Words(byte_stream,len_byte_stream//(14*8*2))

    ctrs = (WORD * ((len_byte_stream*16)//14//2))()
    TransposeBits_14xI16_to_16xI16(byte_stream,ctrs,len(ctrs)//16)
    
    ctrs = np.ctypeslib.as_array(ctrs)
    return ctrs.reshape((len(ctrs)//(2*256*128),2,256,128)) # frame,ctr,column,row</span></span><p style="font-size: 120%; text-align: justify">This function uses: Deinterleve_16Bytes_to_2x8Bytes, TransposeBits_14xI16_to_16xI16, Deinterleve_14x8Words_to_8x14Words, TransposeBits_16xI8_to_8xI16. Timing of this function is approximately equal to the sum of single invocations of mentioned functions for given platform, os and vector size.</p></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 218.75 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">44.9</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">3.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">16.2</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 109.38 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">23.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.7</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">9.4</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 1.07 GB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">227.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">19.7</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">82.9</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 546.88 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">112.0</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">9.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">40.6</td></tr></table></div><div style="clear:both"><br /><br /><br /></div><div style="margin: auto; clear: both; font-size:100%; margin: left; width: 70%; border-top: solid 1px gray; /*border-left: solid 1px gray*/"><span class="tooltip">Deinterleve_16Bytes_to_2x8Bytes()<span class="tooltiptext">void WINAPI Deinterleve_16Bytes_to_2x8Bytes(BYTE *pbSource, DWORD count)
{
    BYTE lsb[8], msb[8];

    for (DWORD i = 0; i &lt; count; i++)
    {
        for (char j = 0; j &lt; 8; j++)
        {
            lsb[j] = pbSource[j * 2];
            msb[j] = pbSource[(j * 2) + 1];
        }
        for (char j = 0; j &lt; 8; j++)
        {
            pbSource[j] = lsb[j];
            pbSource[j + 8] = msb[j];
        }
        pbSource += 16;
    }
}</span></span><p style="font-size: 120%; text-align: justify"></p></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 218.75 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">3.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.3</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.8</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 109.38 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.3</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.4</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 1.07 GB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">15.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">4.1</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 546.88 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">6.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">2.0</td></tr></table></div><div style="clear:both"><br /><br /><br /></div><div style="margin: auto; clear: both; font-size:100%; margin: left; width: 70%; border-top: solid 1px gray; /*border-left: solid 1px gray*/"><span class="tooltip">TransposeBits_16xI8_to_8xI16()<span class="tooltiptext">void WINAPI TransposeBits_16xI8_to_8xI16(BYTE *pbSource, DWORD count)
{
   BYTE a[8], b[8];
   WORD tmp_dest[8];

   for (DWORD j = 0; j &lt; count; j++)
   {

      TransposeByte8x8(pbSource + 0, a);
      TransposeByte8x8(pbSource + 8, b);

      for (char i = 0; i &lt; 8; i++)
      {
          tmp_dest[i] = (a[i] &lt;&lt; 8) | (b[i] &lt;&lt; 0);
      }

      for (char i = 0; i &lt; 16; i++)
      {
          pbSource[i] = ((BYTE *)tmp_dest)[i];
      }

       pbSource += 16;
   }
}</span></span><p style="font-size: 120%; text-align: justify"></p></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 218.75 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">10.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.0</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">2.4</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 109.38 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">5.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.5</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.2</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 1.07 GB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">50.8</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">4.4</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">11.9</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 546.88 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">25.4</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">2.9</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">5.9</td></tr></table></div><div style="clear:both"><br /><br /><br /></div><div style="margin: auto; clear: both; font-size:100%; margin: left; width: 70%; border-top: solid 1px gray; /*border-left: solid 1px gray*/"><span class="tooltip">Deinterleve_14x8Words_to_8x14Word()<span class="tooltiptext">void WINAPI Deinterleve_14x8Words_to_8x14Words(WORD *pwSource, DWORD count)
{
   WORD tmp[8][14];

   for (DWORD c = 0; c &lt; count; c++)
   {
      for (DWORD i = 0; i &lt; 8; i++)
      {
       for (DWORD j = 0; j &lt; 14; j++)
        {
            tmp[i][j] = pwSource[(j * 8) + i];
        }
    }

    for (DWORD i = 0; i &lt; 8 * 14; i++)
    {
        pwSource[i] = ((WORD *)tmp)[i];
    }
    pwSource += 14 * 8;
   }
}</span></span><p style="font-size: 120%; text-align: justify"></p></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 218.75 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">2.8</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.07</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.7</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 109.38 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.4</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.03</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.4</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 1.07 GB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">14.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.3</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">7.1</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 546.88 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">7.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">0.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.8</td></tr></table></div><div style="clear:both"><br /><br /><br /></div><div style="margin: auto; clear: both; font-size:100%; margin: left; width: 70%; border-top: solid 1px gray; /*border-left: solid 1px gray*/"><span class="tooltip">TransposeBits_14xI16_to_16xI16()<span class="tooltiptext">void WINAPI TransposeBits_14xI16_to_16xI16(WORD *source, WORD *destination, DWORD chunks)
{
    WORD row;

    for (DWORD chunk_ctr = 0; chunk_ctr &lt; chunks; chunk_ctr++)
    {
        for (BYTE i = 0; i &lt; 16; i++)
        {
            destination[i] = 0;
        }

        for (BYTE row_ix = 0; row_ix &lt; 14; row_ix++)
        {
            row = source[row_ix];
            for (BYTE col_ix = 0; col_ix &lt; 16; col_ix++)
            {
                destination[col_ix] &lt;&lt;= 1;
                destination[col_ix] |= row &amp; 0x0001;
                row &gt;&gt;= 1;
            }
        }
        source += 14;
        destination += 16;
    }
}</span></span><p style="font-size: 120%; text-align: justify">Maximum vector size is lower than the one used by other tests due to necessity of allocating 2 identical buffers in order to execute test. RPi which was used in these tests has 2GB ram, which is not enough to allocate 2 * 1.07GB.</p></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 765.62 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">101.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">42.7</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">8.1</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 218.75 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">29.0</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">2.2</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">12.2</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left;  border-radius: 10px">Test vector size: 109.38 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">14.5</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">1.1</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">6.1</td></tr></table></div><div style="text-align: center; width: 49%; font-size: 150%; float: left; margin-left: 2%; border-radius: 10px">Test vector size: 546.88 MB<table style="width: 100%; margin: auto;"><tr style="font-size: 120%"><th>Device</th><th>OS</th><th style="background-color: lightgrey">Execution time [s]</th></tr><tr><td style="text-align:center">Rpi</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">72.5</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Windows</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">5.6</td></tr><tr><td style="text-align:center">PC</td><td style="text-align:center">Linux</td><td style="text-align:center; background-color: lightgrey; font-weight: bold">30.6</td></tr></table></div><div style="clear:both"><br /><br /><br /></div></div></body>